---
title: helix-decisions
description: Decision graph infrastructure with semantic search
---

# helix-decisions

Decision graph infrastructure with semantic search, backed by embedded HelixDB.

**Status:** Scaffolded

## Why helix-decisions?

Decisions are the backbone of software architecture. Unlike code (which shows *what*), decisions capture *why*:

- "What have we decided about caching?"
- "Why did we choose X over Y?"
- "Are we already committed to this direction?"

But `.decisions/` directories are unindexed markdown. helix-decisions makes them **searchable in < 100ms** via semantic indexing and tracks relationships between decisions.

## Installation

```bash
cargo install --path helix-decisions
```

## Usage

```bash
# Search decisions (default: .decisions/)
helix-decisions search <QUERY> [OPTIONS]

# Follow supersedes chain
helix-decisions chain <ID>

# Find related decisions
helix-decisions related <ID>

# Validate decision files
helix-decisions check [--json]

# Examples
helix-decisions search "caching"
helix-decisions search "database migration" --status accepted
helix-decisions search "API design" --limit 5 --json
helix-decisions chain 5
helix-decisions related 3
```

### Options

| Option | Description | Default |
|--------|-------------|---------|
| `-d, --directory` | Decision directory | `.decisions/` |
| `-l, --limit` | Max results | 10 |
| `--status` | Filter by status | all |
| `--tags` | Filter by tags (comma-separated) | all |
| `-j, --json` | JSON output | false |

## Output Formats

### Pretty (human-readable)

```
[1] 003: Database Migration Strategy
    Status: accepted
    Score: 0.89
    Tags: database, migration, infrastructure

[2] 001: Schema Versioning Approach
    Status: proposed
    Score: 0.71
    Tags: database, schema, testing
```

### JSON (machine-readable)

```json
{
  "query": "database migration",
  "results": [
    {
      "id": 3,
      "uuid": "hx-a1b2c3",
      "title": "Database Migration Strategy",
      "status": "accepted",
      "score": 0.89,
      "tags": ["database", "migration"],
      "file_path": ".decisions/003-database-migration-strategy.md"
    }
  ]
}
```

## How It Works

### First Invocation

1. Scan `.decisions/` for markdown files
2. Parse YAML frontmatter (id, uuid, title, status, tags, date, deciders, relationships)
3. Generate embeddings with fastembed (local, CPU)
4. Store in embedded HelixDB (`~/.helix/data/decisions/`)
5. Search and return ranked results

### Subsequent Invocations

1. Quick delta check (compare file hashes)
2. Re-index only changed/new decisions
3. Remove deleted decisions from index
4. Search existing index (~100ms)

## Decision Format

Decisions are markdown files with YAML frontmatter:

```yaml
---
id: 3
uuid: hx-a1b2c3  # Required: hash-based UUID for rename safety
title: Database Migration Strategy
status: accepted
date: 2026-01-04
deciders:
  - Alice
  - Bob
tags:
  - database
  - migration
content_hash: abc123...  # Optional: for immutability proof
git_commit: def456...    # Optional: commit when accepted
supersedes: 1            # Optional: decision this replaces
depends_on: [2, 4]       # Optional: prerequisite decisions
related_to: 5            # Optional: related decisions
---

# Context and Problem Statement
...

# Decision
...
```

### Validation

`helix-decisions check` validates all `.md` files in `.decisions/` and fails if frontmatter is
missing or invalid, or if required fields like `uuid` are missing.

### ID Scheme

- **`id`**: Local sequential integer (1, 2, 3...) for human readability
- **`uuid`**: Required hash-based UUID (via helix-id) for distributed safety across branches

### Status Values

| Status | Description |
|--------|-------------|
| `proposed` | Under discussion |
| `accepted` | Decision made and in effect |
| `superseded` | Replaced by another decision |
| `deprecated` | No longer relevant |

### Relationship Types

| Relationship | Description |
|--------------|-------------|
| `supersedes` | This decision replaces another |
| `amends` | This decision modifies another |
| `depends_on` | This decision requires another first |
| `related_to` | Loosely related decisions |

## Agent Integration

Agents can invoke helix-decisions to build context:

```bash
# Get relevant decisions as JSON
helix-decisions search "API versioning" --json | \
  jq '.results[] | "\(.id): \(.title)"'

# Output:
# 3: API Versioning Strategy
# 1: HTTP API Design

# Follow decision lineage
helix-decisions chain 5 --json
```

## Performance

| Operation | Time | Notes |
|-----------|------|-------|
| First search | 2-5s | One-time indexing |
| Subsequent search | < 100ms | Delta check + search |
| Query embedding | 50-100ms | fastembed (local) |
| HelixDB search | < 50ms | Vector similarity |

## Architecture

```
User/Agent
    │
    ↓
┌─────────────────────────────────┐
│   helix-decisions CLI           │
└──────────┬──────────────────────┘
           │
    ┌──────▼──────────────────────┐
    │ Embedded HelixDB             │
    │ • Vector index               │
    │ • Graph relationships        │
    │ • Persistent (~/.helix/)     │
    └──────────────────────────────┘
```

## Not In This Tool

helix-decisions is focused on **search and graph traversal**:

- Decision creation (agents use templates + $EDITOR)
- Decision editing (humans use $EDITOR)
- Format validation (CI concern)
- Git operations (users commit)
- Approval workflows (separate tool)

## See Also

- [ADR format guide](https://github.com/joelparkerhenderson/architecture_decision_record)
- [HelixDB](https://github.com/HelixDB/helix-db)
